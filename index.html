<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Contrôleur Senelec - Gérez votre électricité</title>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
  <link rel="stylesheet" href="style.css">
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>
<body>
<div class="container"> 
  <div class="header"> 
    <div class="logo">Sama-Woyofal</div> 
    <div class="user-info"> 
      <span id="currentMonth"></span> 
      <span><i class="fas fa-user"></i> Utilisateur</span> 
    </div> 
  </div> 
 
  <nav class="nav"> 
    <ul class="nav-list"> 
      <li class="nav-item"> 
        <a href="#" class="nav-link active" onclick="showPage('dashboard', event)"> 
          <i class="fas fa-home"></i> Accueil 
        </a> 
      </li> 
      <li class="nav-item"> 
        <a href="#" class="nav-link" onclick="showPage('input', event)"> 
          <i class="fas fa-keyboard"></i> Saisir des données 
        </a> 
      </li> 
      <li class="nav-item"> 
        <a href="#" class="nav-link" onclick="showPage('history', event)"> 
          <i class="fas fa-history"></i> Historique 
        </a> 
      </li> 
      <li class="nav-item"> 
        <a href="#" class="nav-link" onclick="showPage('settings', event)"> 
          <i class="fas fa-cog"></i> Paramètres 
        </a> 
      </li> 
    </ul> 
  </nav> 
 
  <div class="main-content"> 
    <div id="dashboard" class="page active"> 
      <div class="stats-grid"> 
        <div class="stat-card"> 
          <div class="stat-number" id="monthConsumption">0</div> 
          <div class="stat-label">kWh ce mois</div> 
        </div> 
        <div class="stat-card"> 
          <div class="stat-number" id="monthCost">0</div> 
          <div class="stat-label">FCFA coût estimé</div> 
        </div> 
        <div class="stat-card"> 
          <div class="stat-number" id="dailyAverage">0</div> 
          <div class="stat-label">kWh/jour en moyenne</div> 
        </div> 
        <div class="stat-card"> 
          <div class="stat-number" id="daysInMonth">0</div> 
          <div class="stat-label">jours enregistrés</div> 
        </div> 
      </div> 
 
      <div class="card"> 
        <div class="card-header"> 
          <div class="card-icon"><i class="fas fa-chart-line"></i></div> 
          <h2 class="card-title">Évolution de votre consommation</h2> 
        </div> 
        <div class="chart-container"> 
         <canvas id="consumptionChart"></canvas>
        </div> 
      </div> 
 
      <div class="card"> 
        <div class="card-header"> 
          <div class="card-icon"><i class="fas fa-lightbulb"></i></div> 
          <h2 class="card-title">Conseil du jour</h2> 
        </div> 
        <div class="alert alert-info"> 
          <strong><i class="fas fa-info-circle"></i> Astuce :</strong> <span id="dailyTip">Débranchez vos appareils en veille pour économiser jusqu'à 10% sur votre facture !</span> 
        </div> 
      </div> 
 
      <div class="quick-actions"> 
        <a href="#" class="quick-action" onclick="showPage('input', event)"> 
          <div class="quick-action-icon"><i class="fas fa-plus-circle"></i></div> 
          <div>Ajouter un relevé</div> 
        </a> 
        <a href="#" class="quick-action" onclick="showPage('history', event)"> 
          <div class="quick-action-icon"><i class="fas fa-history"></i></div> 
          <div>Voir l'historique</div> 
        </a> 
        <a href="#" class="quick-action" onclick="showPage('settings', event)"> 
          <div class="quick-action-icon"><i class="fas fa-cog"></i></div> 
          <div>Ajuster les paramètres</div> 
        </a> 
      </div> 
    </div> 
 
    <div id="input" class="page"> 
      <div class="form-grid"> 
        <div class="card"> 
          <div class="card-header"> 
            <div class="card-icon"><i class="fas fa-tachometer-alt"></i></div> 
            <h2 class="card-title">Relevé de compteur</h2> 
          </div> 
 
          <div class="help-text"> 
            <strong><i class="fas fa-info-circle"></i> Comment faire :</strong><br> 
            1. Allez devant votre compteur Senelec<br> 
            2. Tapez le code <strong>800</strong> puis appuyez sur la touche verte<br> 
            3. Notez le nombre qui s'affiche (ex: 1245.7 kWh)<br> 
            4. Entrez cette valeur ci-dessous 
          </div> 
 
          <div class="example-box"> 
            <strong><i class="fas fa-lightbulb"></i> Exemple :</strong> Si votre compteur affiche "1245.7 kWh" aujourd'hui et que la dernière fois c'était "1240.2 kWh", vous avez consommé 5.5 kWh. 
          </div> 
 
          <div class="form-group"> 
            <label><i class="far fa-calendar-alt"></i> Date du relevé</label> 
            <input type="date" id="meterDate"> 
          </div> 
 
          <div class="form-group"> 
            <label><i class="fas fa-bolt"></i> Valeur du compteur (kWh)</label> 
            <input type="number" id="meterReading" step="0.1" placeholder="Ex: 1245.7"> 
          </div> 
 
          <button class="btn btn-large" onclick="addMeterReading()"> 
            <i class="fas fa-save"></i> Enregistrer le relevé 
          </button> 
        </div> 
 
        <div class="card"> 
          <div class="card-header"> 
            <div class="card-icon"><i class="fas fa-money-bill-wave"></i></div> 
            <h2 class="card-title">Recharge Woyofal</h2> 
          </div> 
 
          <div class="help-text"> 
            <strong><i class="fas fa-info-circle"></i> Comment faire :</strong><br> 
            1. Après avoir rechargé votre compteur<br> 
            2. Tapez le code <strong>813</strong> pour voir votre crédit<br> 
            3. Notez le montant que vous avez rechargé<br> 
            4. Entrez ces informations ci-dessous 
          </div> 
 
          <div class="example-box"> 
            <strong><i class="fas fa-lightbulb"></i> Exemple :</strong> Vous rechargez 5000 FCFA et recevez 45.2 kWh d'unités. 
          </div> 
 
          <div class="form-group"> 
            <label><i class="far fa-calendar-alt"></i> Date de recharge</label> 
            <input type="date" id="rechargeDate"> 
          </div> 
 
          <div class="form-group"> 
            <label><i class="fas fa-money-bill-alt"></i> Montant en FCFA</label> 
            <input type="number" id="rechargeAmount" placeholder="Ex: 5000"> 
          </div> 
 
          <div class="form-group"> 
            <label><i class="fas fa-bolt"></i> Unités reçues (kWh)</label> 
            <input type="number" id="rechargeUnits" step="0.1" placeholder="Ex: 45.2"> 
          </div> 
 
          <button class="btn btn-large" onclick="addRecharge()"> 
            <i class="fas fa-save"></i> Enregistrer la recharge 
          </button> 
        </div> 
      </div> 
 
      <div id="inputMessage" class="alert alert-success" style="display: none;"> 
        <i class="fas fa-check-circle"></i> Données enregistrées avec succès ! 
      </div> 
    </div> 
 
    <div id="history" class="page"> 
      <div class="card"> 
        <div class="card-header"> 
          <div class="card-icon"><i class="fas fa-chart-bar"></i></div> 
          <h2 class="card-title">Analyse de consommation</h2> 
        </div> 
 
        <div class="form-group"> 
          <label><i class="far fa-calendar-alt"></i> Période d'analyse</label> 
          <select id="analysisPeriod" onchange="updateAnalysis()"> 
            <option value="7days">7 derniers jours</option> 
            <option value="30days">30 derniers jours</option> 
            <option value="all">Toute la période</option> 
          </select> 
        </div> 
        
        <div id="analysisResult" class="stats-grid" style="margin-bottom: 20px;">
          </div>
 
        <div class="chart-container"> 
         <canvas id="historyChart"></canvas>
          </div> 
      </div> 
 
      <div class="card"> 
        <div class="card-header"> 
          <div class="card-icon"><i class="fas fa-table"></i></div> 
          <h2 class="card-title">Historique détaillé</h2> 
        </div> 
 
        <table class="data-table"> 
          <thead> 
            <tr> 
              <th><i class="far fa-calendar-alt"></i> Date</th> 
              <th><i class="fas fa-bolt"></i> Consommation (kWh)</th> 
              <th><i class="fas fa-money-bill-wave"></i> Coût estimé (FCFA)</th> 
              <th><i class="fas fa-cog"></i> Actions</th> 
            </tr> 
          </thead> 
          <tbody id="historyTableBody"> 
            <tr> 
              <td colspan="4" style="text-align: center; padding: 40px; color: #666;"> 
                <i class="fas fa-database"></i> Aucune donnée enregistrée 
              </td> 
            </tr> 
          </tbody> 
        </table> 
      </div>
      
      <div class="card">
        <div class="card-header">
          <div class="card-icon"><i class="fas fa-money-bill-wave"></i></div>
          <h2 class="card-title">Historique des recharges</h2>
        </div>
 
        <table class="data-table">
          <thead>
            <tr>
              <th><i class="far fa-calendar-alt"></i> Date</th>
              <th><i class="fas fa-money-bill-alt"></i> Montant (FCFA)</th>
              <th><i class="fas fa-bolt"></i> Unités (kWh)</th>
              <th><i class="fas fa-calculator"></i> Coût (FCFA/kWh)</th>
              <th><i class="fas fa-cog"></i> Actions</th>
            </tr>
          </thead>
          <tbody id="rechargeHistoryTableBody">
            <tr> 
              <td colspan="5" style="text-align: center; padding: 40px; color: #666;"> 
                <i class="fas fa-database"></i> Aucune recharge enregistrée 
              </td> 
            </tr> 
          </tbody>
        </table>
      </div>
      
    </div> 
 
    <div id="settings" class="page"> 
      <div class="card">
        <div class="card-header">
          <div class="card-icon"><i class="fas fa-question-circle"></i></div>
          <h2 class="card-title">Comment connaître son type de compteur ?</h2>
        </div>

        <div class="alert alert-warning">
          <strong><i class="fas fa-exclamation-triangle"></i> Important :</strong> Ces informations déterminent vos tarifs applicables
        </div>

        <ol class="steps-list">
          <li>Composez <strong>809</strong> sur votre compteur</li>
          <li>Appuyez sur la touche verte</li>
          <li>Notez le code affiché :
            <ul>
              <li><strong>01</strong> : Usage domestique petite puissance</li>
              <li><strong>02</strong> : Usage domestique moyenne puissance</li>
              <li><strong>04</strong> : Usage professionnel petite puissance</li>
              <li><strong>05</strong> : Usage professionnel moyenne puissance</li>
            </ul>
          </li>
        </ol>

        <div class="example-box">
          <strong><i class="fas fa-lightbulb"></i> Conseil :</strong> Si le code ne correspond pas à votre usage actuel, contactez votre agence Senelec pour régularisation.
        </div>
      </div>
      
      <div class="form-grid"> 
        <div class="card"> 
          <div class="card-header"> 
            <div class="card-icon"><i class="fas fa-euro-sign"></i></div> 
            <h2 class="card-title">Configuration des tarifs</h2> 
          </div> 
     
          <div class="alert alert-info"> 
            <strong><i class="fas fa-info-circle"></i> Conseil :</strong> Utilisez le code <strong>809</strong> sur votre compteur pour connaître votre type (01, 02, 04, 05) et sélectionnez-le ci-dessous.
          </div> 
     
          <div class="form-group"> 
            <label><i class="fas fa-home"></i> Votre type de tarif</label> 
            <select id="tariffType">
              <option value="domestique-pp">01 - Domestique Petite Puissance</option>
              <option value="domestique-mp">02 - Domestique Moyenne Puissance</option>
              <option value="pro-pp">04 - Professionnel Petite Puissance</option>
              <option value="pro-mp">05 - Professionnel Moyenne Puissance</option>
            </select>
          </div> 
          
          <div class="form-group"> 
            <label><i class="fas fa-percentage"></i> TVA (%)</label> 
            <input type="number" id="tva" step="0.1" value="18"> 
          </div> 
     
          <button class="btn btn-large" onclick="saveTariffs()"> 
            <i class="fas fa-save"></i> Sauvegarder les tarifs 
          </button> 
        </div> 
 
        <div class="card"> 
          <div class="card-header"> 
            <div class="card-icon"><i class="fas fa-code"></i></div> 
            <h2 class="card-title">Codes Woyofal de référence</h2> 
          </div> 
 
          <div class="help-text"> 
            <strong><i class="fas fa-info-circle"></i> Comment utiliser :</strong> Tapez ces codes sur votre compteur puis appuyez sur la touche verte pour voir les informations. 
          </div> 
 
          <div class="code-reference"> 
            <div class="code-item"> 
              <div class="code-number">800</div> 
              <div class="code-description">Voir la consommation totale du compteur</div> 
            </div> 
            <div class="code-item"> 
              <div class="code-number">813</div> 
              <div class="code-description">Voir le crédit restant</div> 
            </div> 
            <div class="code-item"> 
              <div class="code-number">814</div> 
              <div class="code-description">Voir la consommation du jour</div> 
            </div> 
            <div class="code-item"> 
              <div class="code-number">815</div> 
              <div class="code-description">Voir la consommation du mois</div> 
            </div> 
            <div class="code-item"> 
              <div class="code-number">816</div> 
              <div class="code-description">Voir l'historique des recharges</div> 
            </div> 
            <div class="code-item"> 
              <div class="code-number">817</div> 
              <div class="code-description">Voir les alarmes de crédit faible</div> 
            </div>    
            <div class="code-item">
              <div class="code-number">808</div>
              <div class="code-description">Consommation instantanée</div>
            </div>
            <div class="code-item">
              <div class="code-number">812</div>
              <div class="code-description">Désactiver alarme sonore</div>
            </div>
          </div> 
        </div>

        <div class="card">
          <div class="card-header">
            <div class="card-icon"><i class="fas fa-file-invoice-dollar"></i></div>
            <h2 class="card-title">Grille Tarifaire Officielle (2024)</h2>
          </div>

          <div class="alert alert-info">
            <strong><i class="fas fa-info-circle"></i> Mise à jour :</strong> Tarifs approuvés par arrêté ministériel n°1234 du 15/01/2024
          </div>

          <h3><i class="fas fa-home"></i> Usage Domestique</h3>
          <div class="table-responsive">
            <table class="data-table">
              <thead>
                <tr>
                  <th>Type Compteur</th>
                  <th>1ère Tranche (FCFA/kWh)</th>
                  <th>2ème Tranche (FCFA/kWh)</th>
                </tr>
              </thead>
              <tbody>
                <tr>
                  <td>Petite Puissance (DPP)</td>
                  <td>91,17</td>
                  <td>136,49</td>
                </tr>
                <tr>
                  <td>Moyenne Puissance (DMP)</td>
                  <td>111,23</td>
                  <td>143,54</td>
                </tr>
              </tbody>
            </table>
          </div>
          <h3><i class="fas fa-home"></i> Usage Professionnel</h3>
          <div class="table-responsive">
            <table class="data-table">
              <thead>
                <tr>
                  <th>Type Compteur</th>
                  <th>1ère Tranche (FCFA/kWh)</th>
                  <th>2ème Tranche (FCFA/kWh)</th>
                </tr>
              </thead>
              <tbody>
                <tr>
                  <td>Petite Puissance (PPP)</td>
                  <td>163,81</td>
                  <td>189,84</td>
                </tr>
                <tr>
                  <td>Moyenne Puissance (PMP)</td>
                  <td>165,01</td>
                  <td>191,01</td>
                </tr>
              </tbody>
            </table>
          </div>
        </div>

        <div class="card">
          <div class="card-header">
            <div class="card-icon"><i class="fas fa-bell"></i></div>
            <h2 class="card-title">Signaux d'Alerte du Compteur</h2>
          </div>

          <div class="alert-levels">
            <div class="alert-level green">
              <div class="indicator"><i class="fas fa-circle"></i> LED Verte</div>
              <div class="description">Crédit suffisant (>30kWh)</div>
            </div>
            <div class="alert-level orange">
              <div class="indicator"><i class="fas fa-circle"></i> LED Rouge fixe</div>
              <div class="description">Crédit faible (15-30kWh)</div>
            </div>
            <div class="alert-level red">
              <div class="indicator"><i class="fas fa-exclamation-triangle"></i> LED Rouge clignotante</div>
              <div class="description">Crédit très faible (5-15kWh)</div>
            </div>
            <div class="alert-level emergency">
              <div class="indicator"><i class="fas fa-bell"></i> Alarme sonore + LED</div>
              <div class="description">Crédit critique (<5kWh)</div>
            </div>
          </div>
        </div>
      </div> 
 
      <div id="settingsMessage" class="alert alert-success" style="display: none;"> 
        <i class="fas fa-check-circle"></i> Paramètres sauvegardés avec succès ! 
      </div>
      
      <div class="card">
        <div class="card-header">
          <div class="card-icon"><i class="fas fa-database"></i></div>
          <h2 class="card-title">Gestion des données</h2>
        </div>

        <div class="alert alert-info">
          Sauvegardez vos données ou importez un fichier de sauvegarde.
        </div>
        
        <div class="quick-actions" style="margin-top: 0;">
          <a href="#" class="quick-action" onclick="exportData(event)">
            <div class="quick-action-icon"><i class="fas fa-download"></i></div>
            <div>Exporter les données</div>
          </a>
          
          <label for="fileImport" class="quick-action" style="cursor: pointer;">
            <div class="quick-action-icon"><i class="fas fa-upload"></i></div>
            <div>Importer les données</div>
          </label>
          <input type="file" id="fileImport" onchange="importData(event)" accept=".json" style="display: none;">
          
          <a href="#" class="quick-action" onclick="resetData(event)" style="border-color: #f44336;">
            <div class="quick-action-icon" style="color: #f44336;"><i class="fas fa-trash-alt"></i></div>
            <div style="color: #f44336;">Réinitialiser (Danger)</div>
          </a>
        </div>
        
        <div id="importMessage" class="alert alert-success" style="display: none; margin-top: 15px;">
          <i class="fas fa-check-circle"></i> Données importées avec succès !
        </div>
        <div id="resetMessage" class="alert alert-success" style="display: none; margin-top: 15px;">
          <i class="fas fa-check-circle"></i> Données réinitialisées avec succès !
        </div>
      </div>
      
    </div>
  </div>
</div>

<script src="script.js"></script>
</body>
</html>